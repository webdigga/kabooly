{% macro organizationSchema() %}
  {
    "@context": "https://schema.org",
    "@type": "LocalBusiness",
    "@id": "{{ env.site }}/#organization",
    "name": "Kabooly",
    "url": "{{ env.site }}",
    "logo": "{{ env.site }}/android-chrome-512x512.png",
    "image": "{{ env.site }}/android-chrome-512x512.png",
    "description": "Managed digital solutions for growing businesses. Monthly website management and CRM software to help small businesses succeed online.",
    "telephone": "{{ settings.phoneNumber }}",
    "email": "{{ settings.email }}",
    "address": {
      "@type": "PostalAddress",
      "streetAddress": "{{ settings.addressLineOne }}, {{ settings.addressLineTwo }}",
      "addressLocality": "{{ settings.addressLineThree }}",
      "addressRegion": "{{ settings.city }}",
      "postalCode": "{{ settings.postCode }}",
      "addressCountry": "{{ settings.country }}"
    },
    "geo": {
      "@type": "GeoCoordinates",
      "latitude": 51.4139892,
      "longitude": -0.303699
    },
    "priceRange": "££",
    "openingHoursSpecification": {
      "@type": "OpeningHoursSpecification",
      "dayOfWeek": [
        "Monday",
        "Tuesday",
        "Wednesday",
        "Thursday",
        "Friday"
      ],
      "opens": "09:00",
      "closes": "17:00"
    }
  }
{% endmacro %}

{% macro schema() %}

  <script type="application/ld+json">

  {% if seoSchemaPageType == 'Organization' %}

    {# Organisation JSON ld #}

    {{ organizationSchema() }}

  {% elseif seoSchemaPageType == 'WebSite' %}

    {# WebSite JSON ld #}

    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "@id": "{{ env.site }}/#website",
      "url": "{{ env.site }}",
      "name": "Kabooly",
      "description": "{{ description }}",
      "publisher": {{ organizationSchema() }}
    }

  {% elseif seoSchemaPageType == 'ContactPage' %}

    {# ContactPage JSON ld #}

    {
      "@context": "https://schema.org",
      "@type": "ContactPage",
      "@id": "{{ env.site }}/contact/",
      "url": "{{ env.site }}/contact/",
      "name": "Contact Kabooly",
      "description": "Get in touch with Kabooly for managed websites and CRM solutions.",
      "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "{{ env.site }}/contact/"
      },
      "publisher": {{ organizationSchema() }}
    }

  {% elseif seoSchemaPageType == 'FAQPage' %}

    {# FAQPage JSON ld #}

    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "@id": "{{ page.url }}",
      "mainEntity": [{% if faqsData.faqs %}{% for faqsDataItem in faqsData.faqs %}
        {
          "@type": "Question",
          "name": "{{ faqsDataItem.question | safe }}",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "{{ faqsDataItem.answer | safe }}"
          }
        }{{ "" if loop.last else "," }}{% endfor %}{% endif %}
      ],
      "publisher": {{ organizationSchema() }}
    }

  {% elseif seoSchemaPageType == 'Product' %}

    {# Product JSON ld #}

    {
      "@context": "https://schema.org",
      "@graph": [
        {% if path == 'managedWebsiteServicePricing' or path == 'pricing' or path == 'managed-website-service' %}
        {
          "@type": "Product",
          "@id": "{{ env.site }}/managed-website-service/#product",
          "name": "Managed Website Service",
          "image": "{{ env.site }}/android-chrome-512x512.png",
          "description": "Professional websites built and managed for small businesses. Custom design, hosting, domain, and monthly maintenance included.",
          "brand": {
            "@type": "Brand",
            "name": "Kabooly"
          },
          "offers": [
            {
              "@type": "Offer",
              "name": "Standard Plan",
              "url": "{{ env.site }}/managed-website-service/pricing/",
              "priceCurrency": "GBP",
              "price": "50",
              "priceSpecification": {
                "@type": "UnitPriceSpecification",
                "price": "50",
                "priceCurrency": "GBP",
                "billingDuration": "P1M",
                "billingIncrement": 1
              },
              "availability": "https://schema.org/InStock",
              "itemCondition": "https://schema.org/NewCondition"
            },
            {
              "@type": "Offer",
              "name": "Pro Plan",
              "url": "{{ env.site }}/managed-website-service/pricing/",
              "priceCurrency": "GBP",
              "price": "90",
              "priceSpecification": {
                "@type": "UnitPriceSpecification",
                "price": "90",
                "priceCurrency": "GBP",
                "billingDuration": "P1M",
                "billingIncrement": 1
              },
              "availability": "https://schema.org/InStock",
              "itemCondition": "https://schema.org/NewCondition"
            }
          ],
          "aggregateRating": {
            "@type": "AggregateRating",
            "ratingValue": "5.0",
            "bestRating": "5",
            "worstRating": "1",
            "ratingCount": "3",
            "reviewCount": "3"
          },
          "review": [
            {
              "@type": "Review",
              "name": "We are absolutely thrilled",
              "reviewBody": "We are absolutely thrilled with the websites that David at Kabooly created for us! The entire process was seamless from start to finish. He took the time to understand our vision and translated it into performant, user-friendly sites that perfectly represents our brand. The site not only looks fantastic but also performs flawlessly. I highly recommend Kabooly for anyone looking to build or upgrade their website. He truly went above and beyond!",
              "reviewRating": {
                "@type": "Rating",
                "ratingValue": "5",
                "bestRating": "5",
                "worstRating": "1"
              },
              "datePublished": "2024-05-15",
              "author": {"@type": "Person", "name": "Jonny Rowse"},
              "publisher": {"@type": "Organization", "name": "Arragon affiliates"}
            },
            {
              "@type": "Review",
              "name": "David is absolutely amazing",
              "reviewBody": "David is absolutely amazing, I'm a technology phobic if I don't understand things, I already had a website, but desperately needed into grading to look more professional, I had an idea of want I wanted, he did did this for me. My website is now so much better, cleaner and clearer to understand, and even other colleagues in my profession are loving the new design. Thank you",
              "reviewRating": {
                "@type": "Rating",
                "ratingValue": "5",
                "bestRating": "5",
                "worstRating": "1"
              },
              "datePublished": "2024-11-12",
              "author": {"@type": "Person", "name": "Dr. Hannah Emmett"},
              "publisher": {"@type": "Organization", "name": "Anttz Chiropractor"}
            },
            {
              "@type": "Review",
              "name": "The service has been seamless",
              "reviewBody": "David at Kabooly.com made the entire process of getting my tutoring website up and running effortless. He understood exactly what I needed and delivered a professional, well-designed site that showcases my business perfectly. The service has been seamless, and any updates are handled quickly. I highly recommend David for anyone looking for a well designed, reliable and fully managed website solution",
              "reviewRating": {
                "@type": "Rating",
                "ratingValue": "5",
                "bestRating": "5",
                "worstRating": "1"
              },
              "datePublished": "2025-02-01",
              "author": {"@type": "Person", "name": "Michael Carragher"},
              "publisher": {"@type": "Organization", "name": "Economics and Business Tutor"}
            }
          ]
        },
        {% elif path == 'crmPricing' or path == 'crm' %}
        {
          "@type": "SoftwareApplication",
          "@id": "{{ env.site }}/crm/#product",
          "name": "Kabooly CRM",
          "applicationCategory": "BusinessApplication",
          "operatingSystem": "Web Browser",
          "image": "{{ env.site }}/android-chrome-512x512.png",
          "description": "CRM software for small businesses. Manage contacts, track deals, send campaigns and collaborate with your team.",
          "brand": {
            "@type": "Brand",
            "name": "Kabooly"
          },
          "offers": [
            {
              "@type": "Offer",
              "name": "Starter",
              "url": "{{ env.site }}/crm/pricing/",
              "priceCurrency": "GBP",
              "price": "100",
              "priceSpecification": {
                "@type": "UnitPriceSpecification",
                "price": "100",
                "priceCurrency": "GBP",
                "billingDuration": "P1M",
                "billingIncrement": 1
              },
              "availability": "https://schema.org/InStock"
            },
            {
              "@type": "Offer",
              "name": "Professional",
              "url": "{{ env.site }}/crm/pricing/",
              "priceCurrency": "GBP",
              "price": "200",
              "priceSpecification": {
                "@type": "UnitPriceSpecification",
                "price": "200",
                "priceCurrency": "GBP",
                "billingDuration": "P1M",
                "billingIncrement": 1
              },
              "availability": "https://schema.org/InStock"
            },
            {
              "@type": "Offer",
              "name": "Enterprise",
              "url": "{{ env.site }}/crm/pricing/",
              "priceCurrency": "GBP",
              "price": "500",
              "priceSpecification": {
                "@type": "UnitPriceSpecification",
                "price": "500",
                "priceCurrency": "GBP",
                "billingDuration": "P1M",
                "billingIncrement": 1
              },
              "availability": "https://schema.org/InStock"
            }
          ]
        },
        {% endif %}
        {{ organizationSchema() }}
      ]
    }   

  {% else %}

    {# Default - LocalBusiness JSON ld #}

    {{ organizationSchema() }}

  {% endif %}

</script>

{% endmacro %}
